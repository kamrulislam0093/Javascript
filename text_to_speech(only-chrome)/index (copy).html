<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Jquery basic</title>
</head>
<style type="text/css">

</style>
<body>



<div class="voiceselector">
	<select name="voice" id="voices">	</select>

	<textarea name="text"></textarea>	



</div>



<script type="text/javascript">

	const msg = new SpeechSynthesisUtterance();

	var voices = [];

	const selectvoice = document.querySelector('[name="voice"]');
	const mssage = document.querySelector('[name="text"]');

	

	speechSynthesis.addEventListener('voiceschanged', function(){
		voices = speechSynthesis.getVoices();

		voices.forEach( function(element, index) {
			selectvoice.innerHTML = selectvoice.innerHTML + '<option value="' + element.name + '">' + element.lang + '</option>'; 
		});

	})
	

	selectvoice.addEventListener('change', function(){
		msg.text = mssage.value;
		msg.voice = voices.find( voice => voice.name === this.value )
		this.value = this.value;
		msgspeak();
	})


	function msgspeak( sound = true ){
		speechSynthesis.cancel();
		if ( sound ) {
			speechSynthesis.speak(msg);
		}
	}


</script>





</body>
</html>